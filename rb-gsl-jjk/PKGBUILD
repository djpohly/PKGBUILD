# Contributor: Andreas W. Hauser <andy-aur@splashground.de> 
_pkgname=rb-gsl
pkgname=$_pkgname-jjk
pkgver=1.14.7
pkgrel=2
pkgdesc="a ruby interface to GSL (GNU Scientific Library)"
url="http://rb-gsl.rubyforge.org/"
license="GPL"
depends=('gsl>=1.14' ruby)
optdepends=(plotutils)
arch=(x86_64 i686)
conflicts=(ruby-gsl rb-gsl)
replaces=(ruby-gsl rb-gsl)
provides=(ruby-gsl rb-gsl)
source=(http://rubyforge.org/frs/download.php/74341/$_pkgname-$pkgver.tgz
    rb-gsl-complex-vector-matrix-equal.diff
    062436bb188046862dfa4d697d45ddc73ceaf54a.patch
    fix-ieee-compile-error.patch)
md5sums=('8107bc0cfe231d9fa1b6f7cd2aed216e'
         '9b17bac23ef1abdad72b509f1683e8c9'
         'a1c5c0c3e53596f36f81d7eb7c0b6cbc'
         'd9413fd92184bca5ed2efbcd071f97d0')

prepare() {
  cd "$srcdir/$_pkgname-$pkgver"
  patch -p0 < "../rb-gsl-complex-vector-matrix-equal.diff"
  patch -p1 <../062436bb188046862dfa4d697d45ddc73ceaf54a.patch
  patch -p0 <../fix-ieee-compile-error.patch
}

build() {
  cd "$srcdir/$_pkgname-$pkgver"
  ruby setup.rb config
  ruby setup.rb setup
  }

package() {
  cd "$srcdir/$_pkgname-$pkgver"
  ruby setup.rb install --prefix="$pkgdir"
}
