From 8b53c4e48031f6c7d002769ea406a8260811e937 Mon Sep 17 00:00:00 2001
From: Olivier Brunel <jjk@jjacky.com>
Date: Tue, 15 Oct 2013 15:07:45 +0200
Subject: [PATCH] cellrenderertext: Fix possible overwriting of markup

When creating the layout, attributes were inserted after existing attributes
with a matching start_index; this could result in some attributes from markup
being ignored/overwritten.

For example, if the markup started with a span setting a color, it would be
overwritten by the foreground property for that section.

Inserting attributes before will ensure markup attributes are preserved.

Signed-off-by: Olivier Brunel <jjk@jjacky.com>
---
 gtk/gtkcellrenderertext.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/gtk/gtkcellrenderertext.c b/gtk/gtkcellrenderertext.c
index 18923e2..0b0eb54 100644
--- a/gtk/gtkcellrenderertext.c
+++ b/gtk/gtkcellrenderertext.c
@@ -1605,7 +1605,7 @@ add_attr (PangoAttrList  *attr_list,
   attr->start_index = 0;
   attr->end_index = G_MAXINT;
   
-  pango_attr_list_insert (attr_list, attr);
+  pango_attr_list_insert_before (attr_list, attr);
 }
 
 static PangoLayout*
-- 
2.3.5

