From 8161e1e511ad6a59a6540f715d93ce8114c71a2a Mon Sep 17 00:00:00 2001
From: Olivier Brunel <jjk@jjacky.com>
Date: Thu, 19 Sep 2013 18:55:58 +0200
Subject: [PATCH 2/3] Only disable output on console during boot if needed

If there are no more jobs on console, no need/we shouldn't disable output.

Signed-off-by: Olivier Brunel <jjk@jjacky.com>
---
 src/core/manager.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/src/core/manager.c b/src/core/manager.c
index 58dacdc..ce32baf 100644
--- a/src/core/manager.c
+++ b/src/core/manager.c
@@ -1761,7 +1761,7 @@ static int process_event(Manager *m, struct epoll_event *ev) {
         }
 
         case WATCH_IDLE_PIPE: {
-                m->no_console_output = true;
+                m->no_console_output = m->n_on_console > 0;
 
                 manager_unwatch_idle_pipe(m);
                 close_idle_pipe(m);
-- 
1.8.4

