From fe57190a046283c7d8522815c6667a6378f11b00 Mon Sep 17 00:00:00 2001
From: Olivier Brunel <jjk@jjacky.com>
Date: Thu, 19 Sep 2013 18:58:20 +0200
Subject: [PATCH 3/3] Fix possible lack of status messages on shutdown/reboot

Since 31a7eb86 the output on console can be disabled to avoid colliding with
gettys. However, it could also lead to a lack of messages during
shutdown/reboot.

Signed-off-by: Olivier Brunel <jjk@jjacky.com>
---
 src/core/job.c | 3 +++
 1 file changed, 3 insertions(+)

diff --git a/src/core/job.c b/src/core/job.c
index bf1d956..576da39 100644
--- a/src/core/job.c
+++ b/src/core/job.c
@@ -1100,6 +1100,9 @@ void job_shutdown_magic(Job *j) {
         if (detect_container(NULL) > 0)
                 return;
 
+        /* In case messages on console has been disabled on boot */
+        j->unit->manager->no_console_output = false;
+
         asynchronous_sync();
 }
 
-- 
1.8.4

